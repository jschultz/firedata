################################################################################
# event_history.sh
#    --nologfile
#    --user "qgis"
#    --database "fire"
#    --viewtable "(SELECT lmu.description, lmu.fmp_geom AS lmu_fmp_geom, (CASE WHEN EXTRACT(MONTH FROM fih_date1) <= 6 THEN EXTRACT(YEAR FROM fih_date1) ELSE EXTRACT(YEAR FROM fih_date1) + 1 END) AS year, fih_cause, history.geom AS history_geom FROM land_management_unit_1 AS lmu, lmu_fire_history_junction_1, dbca_fire_history_dbca_060_2021_08_20 AS history WHERE lmu_fire_history_junction_1.lmu_extcode = lmu.extcode AND history.id = lmu_fire_history_junction_1.history_id)"
#    --viewcolumns "description;year;fih_cause;ST_Area(ST_Intersection(ST_Union(lmu_fmp_geom),ST_Union(history_geom))::geography)/10000;ST_Area(ST_Union(history_geom)::geography)/10000"
#    --viewaliases "description;year;fih_cause;lmu_area;total_area"
#    --viewgroups "description;year;fih_cause"
#    --table "lmu_fire_history_1"
################################################################################
# psql
#    --username "qgis"
#    "fire"
#    --command "DROP TABLE IF EXISTS lmu_fire_history_junction_1"
#    --command "CREATE TABLE lmu_fire_history_junction_1 AS SELECT extcode AS lmu_extcode, history.id AS history_id FROM dbca_fire_history_dbca_060_2021_08_20 AS history, land_management_unit_1 AS lmu WHERE ST_Intersects(history.geom, lmu.fmp_geom)"
#    --command "CREATE INDEX ON lmu_fire_history_junction_1 (lmu_extcode)"
