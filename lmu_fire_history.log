################################################################################
# event_history.sh
#    --nologfile
#    --user "qgis"
#    --database "fire"
#    --viewtable "(SELECT lmu.description, lmu.geom AS lmu_geom, (CASE WHEN EXTRACT(MONTH FROM fih_date1) <= 6 THEN EXTRACT(YEAR FROM fih_date1) ELSE EXTRACT(YEAR FROM fih_date1) + 1 END) AS year, fih_cause, history.geom AS history_geom FROM land_management_unit AS lmu, lmu_fire_history_junction, dbca_fire_history_dbca_060_2021_08_20 AS history WHERE lmu_fire_history_junction.lmu_extcode = lmu.extcode AND history.id = lmu_fire_history_junction.history_id)"
#    --viewcolumns "description;year;fih_cause;lmu_geom;ST_Area(ST_Intersection(ST_Union(lmu_geom),ST_Union(history_geom))::geography)/10000;ST_Area(ST_Union(history_geom)::geography)/10000"
#    --viewaliases "description;year;fih_cause;geom;lmu_area;total_area"
#    --viewgroups "description;lmu_geom;year;fih_cause"
#    --table "lmu_fire_history"
################################################################################
# psql
#    --username "qgis"
#    "fire"
#    --command "DROP TABLE IF EXISTS lmu_fire_history_junction"
#    --command "CREATE TABLE lmu_fire_history_junction AS SELECT extcode AS lmu_extcode, history.id AS history_id FROM dbca_fire_history_dbca_060_2021_08_20 AS history, land_management_unit AS lmu WHERE ST_Intersects(history.geom, lmu.geom)"
#    --command "CREATE INDEX ON lmu_fire_history_junction (lmu_extcode)"
